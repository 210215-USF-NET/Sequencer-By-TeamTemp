2021-04-01 13:34:58.872 -04:00 [INF] Starting up
2021-04-01 13:35:00.550 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-04-01 13:35:00.560 -04:00 [INF] Hosting environment: Development
2021-04-01 13:35:00.561 -04:00 [INF] Content root path: C:\Revature-training-repositories\RevMixer-P2\Sequencer-By-TeamTemp\RevMixer\MixerREST
2021-04-01 13:35:00.576 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44381/swagger/index.html - -
2021-04-01 13:35:00.697 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44381/swagger/index.html - - - 200 - text/html;charset=utf-8 122.3279ms
2021-04-01 13:35:01.284 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44381/swagger/v1/swagger.json - -
2021-04-01 13:35:01.394 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44381/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 109.9499ms
2021-04-01 13:35:22.499 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44381/api/Comments application/json-patch+json 97
2021-04-01 13:35:22.510 -04:00 [INF] CORS policy execution successful.
2021-04-01 13:35:22.568 -04:00 [INF] Executing endpoint 'MixerREST.Controllers.CommentsController.AddCommentAsync (MixerREST)'
2021-04-01 13:35:22.614 -04:00 [INF] Route matched with {action = "AddComment", controller = "Comments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCommentAsync(MixerModels.Comments) on controller MixerREST.Controllers.CommentsController (MixerREST).
2021-04-01 13:35:23.853 -04:00 [INF] Entity Framework Core 5.0.4 initialized 'MixerDBContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: None
2021-04-01 13:35:24.892 -04:00 [ERR] Failed executing DbCommand (75ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Comments" ("Comment", "CommentData", "UploadMusicId", "UserId")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2021-04-01 13:35:25.030 -04:00 [ERR] An exception occurred in the database while saving changes for context type 'MixerDL.MixerDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "Comments" violates foreign key constraint "FK_Comments_UploadMusic_UploadMusicId"
   at Npgsql.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|194_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "Comments" violates foreign key constraint "FK_Comments_UploadMusic_UploadMusicId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Comments
    ConstraintName: FK_Comments_UploadMusic_UploadMusicId
    File: ri_triggers.c
    Line: 2772
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "Comments" violates foreign key constraint "FK_Comments_UploadMusic_UploadMusicId"
   at Npgsql.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|194_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "Comments" violates foreign key constraint "FK_Comments_UploadMusic_UploadMusicId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Comments
    ConstraintName: FK_Comments_UploadMusic_UploadMusicId
    File: ri_triggers.c
    Line: 2772
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2021-04-01 13:35:25.228 -04:00 [ERR] An error occurred while updating the entries. See the inner exception for details.
2021-04-01 13:35:25.235 -04:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2021-04-01 13:35:25.296 -04:00 [INF] Executed action MixerREST.Controllers.CommentsController.AddCommentAsync (MixerREST) in 2675.9786ms
2021-04-01 13:35:25.297 -04:00 [INF] Executed endpoint 'MixerREST.Controllers.CommentsController.AddCommentAsync (MixerREST)'
2021-04-01 13:35:25.302 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44381/api/Comments application/json-patch+json 97 - 400 163 application/problem+json;+charset=utf-8 2803.0241ms
2021-04-01 13:35:59.896 -04:00 [INF] Starting up
2021-04-01 13:36:01.077 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-04-01 13:36:01.081 -04:00 [INF] Hosting environment: Development
2021-04-01 13:36:01.083 -04:00 [INF] Content root path: C:\Revature-training-repositories\RevMixer-P2\Sequencer-By-TeamTemp\RevMixer\MixerREST
2021-04-01 13:36:01.121 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44381/swagger/index.html - -
2021-04-01 13:36:01.257 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44381/swagger/index.html - - - 200 - text/html;charset=utf-8 142.6432ms
2021-04-01 13:36:01.865 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44381/swagger/v1/swagger.json - -
2021-04-01 13:36:01.986 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44381/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 116.6444ms
2021-04-01 13:36:07.307 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44381/api/Comments - -
2021-04-01 13:36:07.358 -04:00 [INF] Executing endpoint 'MixerREST.Controllers.CommentsController.GetCommentsAsync (MixerREST)'
2021-04-01 13:36:07.381 -04:00 [INF] Route matched with {action = "GetComments", controller = "Comments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCommentsAsync() on controller MixerREST.Controllers.CommentsController (MixerREST).
2021-04-01 13:36:08.268 -04:00 [INF] Entity Framework Core 5.0.4 initialized 'MixerDBContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: None
2021-04-01 13:36:09.376 -04:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Comment", c."CommentData", c."UploadMusicId", c."UserId", u."Id", u."Email", u."IsAdmin", u."UserName", u0."Id", u0."Likes", u0."MusicFilePath", u0."Name", u0."Plays", u0."UploadDate", u0."UserId"
FROM "Comments" AS c
INNER JOIN "User" AS u ON c."UserId" = u."Id"
INNER JOIN "UploadMusic" AS u0 ON c."UploadMusicId" = u0."Id"
2021-04-01 13:36:09.397 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MixerModels.Comments, MixerModels, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-04-01 13:36:09.497 -04:00 [INF] Executed action MixerREST.Controllers.CommentsController.GetCommentsAsync (MixerREST) in 2111.4247ms
2021-04-01 13:36:09.498 -04:00 [INF] Executed endpoint 'MixerREST.Controllers.CommentsController.GetCommentsAsync (MixerREST)'
2021-04-01 13:36:09.503 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44381/api/Comments - - - 200 2 application/json;+charset=utf-8 2195.7238ms
2021-04-01 13:36:14.639 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44381/api/Comments application/json-patch+json 97
2021-04-01 13:36:14.641 -04:00 [INF] CORS policy execution successful.
2021-04-01 13:36:14.644 -04:00 [INF] Executing endpoint 'MixerREST.Controllers.CommentsController.AddCommentAsync (MixerREST)'
2021-04-01 13:36:14.655 -04:00 [INF] Route matched with {action = "AddComment", controller = "Comments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCommentAsync(MixerModels.Comments) on controller MixerREST.Controllers.CommentsController (MixerREST).
2021-04-01 13:36:14.749 -04:00 [INF] Entity Framework Core 5.0.4 initialized 'MixerDBContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: None
2021-04-01 13:36:14.996 -04:00 [ERR] Failed executing DbCommand (62ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Comments" ("Comment", "CommentData", "UploadMusicId", "UserId")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2021-04-01 13:36:15.096 -04:00 [ERR] An exception occurred in the database while saving changes for context type 'MixerDL.MixerDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "Comments" violates foreign key constraint "FK_Comments_UploadMusic_UploadMusicId"
   at Npgsql.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|194_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "Comments" violates foreign key constraint "FK_Comments_UploadMusic_UploadMusicId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Comments
    ConstraintName: FK_Comments_UploadMusic_UploadMusicId
    File: ri_triggers.c
    Line: 2772
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "Comments" violates foreign key constraint "FK_Comments_UploadMusic_UploadMusicId"
   at Npgsql.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|194_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "Comments" violates foreign key constraint "FK_Comments_UploadMusic_UploadMusicId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Comments
    ConstraintName: FK_Comments_UploadMusic_UploadMusicId
    File: ri_triggers.c
    Line: 2772
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2021-04-01 13:36:15.280 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2021-04-01 13:36:15.282 -04:00 [INF] Executed action MixerREST.Controllers.CommentsController.AddCommentAsync (MixerREST) in 626.1653ms
2021-04-01 13:36:15.283 -04:00 [INF] Executed endpoint 'MixerREST.Controllers.CommentsController.AddCommentAsync (MixerREST)'
2021-04-01 13:36:15.287 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44381/api/Comments application/json-patch+json 97 - 200 - text/plain;+charset=utf-8 647.4465ms
2021-04-01 13:39:43.380 -04:00 [INF] Starting up
2021-04-01 13:39:44.508 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-04-01 13:39:44.510 -04:00 [INF] Hosting environment: Development
2021-04-01 13:39:44.511 -04:00 [INF] Content root path: C:\Revature-training-repositories\RevMixer-P2\Sequencer-By-TeamTemp\RevMixer\MixerREST
2021-04-01 13:39:44.526 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44381/swagger/index.html - -
2021-04-01 13:39:44.655 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44381/swagger/index.html - - - 200 - text/html;charset=utf-8 131.2958ms
2021-04-01 13:39:45.226 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44381/swagger/v1/swagger.json - -
2021-04-01 13:39:45.325 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44381/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 96.6088ms
2021-04-01 13:41:08.043 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44381/api/Comments application/json-patch+json 97
2021-04-01 13:41:08.049 -04:00 [INF] CORS policy execution successful.
2021-04-01 13:41:08.094 -04:00 [INF] Executing endpoint 'MixerREST.Controllers.CommentsController.AddCommentAsync (MixerREST)'
2021-04-01 13:41:08.132 -04:00 [INF] Route matched with {action = "AddComment", controller = "Comments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCommentAsync(MixerModels.Comments) on controller MixerREST.Controllers.CommentsController (MixerREST).
2021-04-01 13:41:21.128 -04:00 [INF] Entity Framework Core 5.0.4 initialized 'MixerDBContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: None
2021-04-01 13:41:22.192 -04:00 [ERR] Failed executing DbCommand (126ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Comments" ("Comment", "CommentData", "UploadMusicId", "UserId")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2021-04-01 13:41:22.310 -04:00 [ERR] An exception occurred in the database while saving changes for context type 'MixerDL.MixerDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "Comments" violates foreign key constraint "FK_Comments_UploadMusic_UploadMusicId"
   at Npgsql.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|194_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "Comments" violates foreign key constraint "FK_Comments_UploadMusic_UploadMusicId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Comments
    ConstraintName: FK_Comments_UploadMusic_UploadMusicId
    File: ri_triggers.c
    Line: 2772
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "Comments" violates foreign key constraint "FK_Comments_UploadMusic_UploadMusicId"
   at Npgsql.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|194_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "Comments" violates foreign key constraint "FK_Comments_UploadMusic_UploadMusicId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Comments
    ConstraintName: FK_Comments_UploadMusic_UploadMusicId
    File: ri_triggers.c
    Line: 2772
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2021-04-01 13:41:29.216 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2021-04-01 13:41:29.224 -04:00 [INF] Executed action MixerREST.Controllers.CommentsController.AddCommentAsync (MixerREST) in 21087.1086ms
2021-04-01 13:41:29.225 -04:00 [INF] Executed endpoint 'MixerREST.Controllers.CommentsController.AddCommentAsync (MixerREST)'
2021-04-01 13:41:29.230 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44381/api/Comments application/json-patch+json 97 - 200 - text/plain;+charset=utf-8 21187.6435ms
2021-04-01 13:41:55.353 -04:00 [INF] Starting up
2021-04-01 13:41:56.520 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-04-01 13:41:56.523 -04:00 [INF] Hosting environment: Development
2021-04-01 13:41:56.525 -04:00 [INF] Content root path: C:\Revature-training-repositories\RevMixer-P2\Sequencer-By-TeamTemp\RevMixer\MixerREST
2021-04-01 13:41:56.540 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44381/swagger/index.html - -
2021-04-01 13:41:56.648 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44381/swagger/index.html - - - 200 - text/html;charset=utf-8 110.1337ms
2021-04-01 13:41:57.194 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44381/swagger/v1/swagger.json - -
2021-04-01 13:41:57.308 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44381/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 114.1504ms
2021-04-01 13:43:38.633 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44381/api/Comments application/json-patch+json 98
2021-04-01 13:43:38.637 -04:00 [INF] CORS policy execution successful.
2021-04-01 13:43:38.681 -04:00 [INF] Executing endpoint 'MixerREST.Controllers.CommentsController.AddCommentAsync (MixerREST)'
2021-04-01 13:43:38.713 -04:00 [INF] Route matched with {action = "AddComment", controller = "Comments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCommentAsync(MixerModels.Comments) on controller MixerREST.Controllers.CommentsController (MixerREST).
2021-04-01 13:44:14.697 -04:00 [INF] Entity Framework Core 5.0.4 initialized 'MixerDBContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: None
2021-04-01 13:44:15.147 -04:00 [ERR] An error occurred using the connection to database 'syltdowc' on server 'tcp://queenie.db.elephantsql.com:5432'.
2021-04-01 13:44:15.188 -04:00 [ERR] An exception occurred in the database while saving changes for context type 'MixerDL.MixerDBContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.PostgresException (0x80004005): 53300: too many connections for role "syltdowc"
   at Npgsql.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|194_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.ConnectorPool.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.ConnectorPool.<>c__DisplayClass38_0.<<Rent>g__RentAsync|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Npgsql.NpgsqlConnection.<>c__DisplayClass41_0.<<Open>g__OpenAsync|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
  Exception data:
    Severity: FATAL
    SqlState: 53300
    MessageText: too many connections for role "syltdowc"
    File: miscinit.c
    Line: 661
    Routine: InitializeSessionUserId
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.PostgresException (0x80004005): 53300: too many connections for role "syltdowc"
   at Npgsql.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|194_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.ConnectorPool.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.ConnectorPool.<>c__DisplayClass38_0.<<Rent>g__RentAsync|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Npgsql.NpgsqlConnection.<>c__DisplayClass41_0.<<Open>g__OpenAsync|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
  Exception data:
    Severity: FATAL
    SqlState: 53300
    MessageText: too many connections for role "syltdowc"
    File: miscinit.c
    Line: 661
    Routine: InitializeSessionUserId
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2021-04-01 13:44:19.166 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2021-04-01 13:44:19.171 -04:00 [INF] Executed action MixerREST.Controllers.CommentsController.AddCommentAsync (MixerREST) in 40454.7935ms
2021-04-01 13:44:19.172 -04:00 [INF] Executed endpoint 'MixerREST.Controllers.CommentsController.AddCommentAsync (MixerREST)'
2021-04-01 13:44:19.178 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44381/api/Comments application/json-patch+json 98 - 200 - text/plain;+charset=utf-8 40546.8761ms
2021-04-01 13:45:03.853 -04:00 [INF] Starting up
2021-04-01 13:45:04.905 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-04-01 13:45:04.907 -04:00 [INF] Hosting environment: Development
2021-04-01 13:45:04.908 -04:00 [INF] Content root path: C:\Revature-training-repositories\RevMixer-P2\Sequencer-By-TeamTemp\RevMixer\MixerREST
2021-04-01 13:45:04.923 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44381/swagger/index.html - -
2021-04-01 13:45:05.039 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44381/swagger/index.html - - - 200 - text/html;charset=utf-8 119.9818ms
2021-04-01 13:45:05.521 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44381/swagger/v1/swagger.json - -
2021-04-01 13:45:05.612 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44381/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 89.1040ms
2021-04-01 13:45:40.320 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44381/api/Comments application/json-patch+json 98
2021-04-01 13:45:40.325 -04:00 [INF] CORS policy execution successful.
2021-04-01 13:45:40.378 -04:00 [INF] Executing endpoint 'MixerREST.Controllers.CommentsController.AddCommentAsync (MixerREST)'
2021-04-01 13:45:40.416 -04:00 [INF] Route matched with {action = "AddComment", controller = "Comments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCommentAsync(MixerModels.Comments) on controller MixerREST.Controllers.CommentsController (MixerREST).
2021-04-01 13:45:41.403 -04:00 [INF] Entity Framework Core 5.0.4 initialized 'MixerDBContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: None
2021-04-01 13:45:42.368 -04:00 [INF] Executed DbCommand (55ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Comments" ("Comment", "CommentData", "UploadMusicId", "UserId")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2021-04-01 13:45:42.475 -04:00 [INF] comment from user with ID of 0 posted
2021-04-01 13:45:42.482 -04:00 [INF] Executing CreatedAtActionResult, writing value of type 'MixerModels.Comments'.
2021-04-01 13:45:42.553 -04:00 [INF] Executed action MixerREST.Controllers.CommentsController.AddCommentAsync (MixerREST) in 2132.6018ms
2021-04-01 13:45:42.554 -04:00 [INF] Executed endpoint 'MixerREST.Controllers.CommentsController.AddCommentAsync (MixerREST)'
2021-04-01 13:45:42.559 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44381/api/Comments application/json-patch+json 98 - 201 131 application/json;+charset=utf-8 2241.9394ms
